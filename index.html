<style>
  :root {
    --turno-m: #FFB6C1;
    --turno-t: #98FB98;
    --turno-n: #87CEEB;
    --turno-a: #DDA0DD;
    --turno-v: #F0E68C;
    --festivo: #FF6B6B;
    --especial: #DDA0DD;
    --nuevo-especial: #98FB98;
    --october-17: #F0E68C;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 16px;
    line-height: 1.5;
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    background-color: #FF6961;
  }

  body::before {
    content: "CC.OO";
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-45deg);
    font-size: 15vw;
    color: rgba(0, 0, 0, 0.1);
    white-space: nowrap;
    pointer-events: none;
    z-index: -1;
  }

  .calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 3px;
    margin-bottom: 20px;
    border: 2px solid red;
    padding: 5px;
    background-color: white;
    max-width: 700px;
    margin: 0 auto;
  }

  .day {
    border: 1px solid black;
    padding: 2px;
    min-height: 25px;
    position: relative;
    background-color: white;
    font-size: 0.75rem;
  }

  .day.festivo {
    background-color: var(--festivo);
  }

  .day.especial {
    background-color: var(--especial);
  }

  .day.nuevo-especial {
    background-color: var(--nuevo-especial);
  }

  .day.october-17 {
    background-color: var(--october-17);
  }

  .day-header {
    font-weight: bold;
    margin-bottom: 1px;
    font-size: 0.8rem;
    padding: 1px;
  }

  .controls {
    margin-bottom: 5px;
    padding: 4px;
    background-color: white;
    border-radius: 4px;
    border: 2px solid red;
    max-width: 700px;
    margin: 0 auto;
  }

  .month-nav {
    margin-bottom: 5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .month-nav button {
    padding: 3px 5px;
    font-size: 0.8rem;
    border-radius: 4px;
    border: 1px solid #ccc;
    background: white;
    cursor: pointer;
    transition: all 0.2s;
  }

  .month-nav button:hover {
    background: #f0f0f0;
  }

  .legend {
    display: flex;
    gap: 2px;
    margin-bottom: 4px;
    font-size: 0.7rem;
    padding: 3px;
    max-width: 700px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 2px;
    padding: 1px;
    font-size: 0.65rem;
  }

  .legend-color {
    width: 6px;
    height: 6px;
    border-radius: 2px;
    border: 1px solid black;
  }

  .turno-select {
    width: 100%;
    padding: 2px;
    margin-top: 1px;
    background-color: white;
    border: 1px solid black;
    border-radius: 2px;
    font-size: 0.7rem;
  }

  .turno-select option[value=""] { background-color: white; }
  .turno-select option[value="M"] { background-color: var(--turno-m); }
  .turno-select option[value="T"] { background-color: var(--turno-t); }
  .turno-select option[value="N"] { background-color: var(--turno-n); }
  .turno-select option[value="A"] { background-color: var(--turno-a); }
  .turno-select option[value="V"] { background-color: var(--turno-v); }
  .turno-select option[value="F"] { background-color: var(--festivo); }

  .day-content {
    padding: 1px;
    border-radius: 2px;
    margin-top: 1px;
  }

  .turno-m { background-color: var(--turno-m); }
  .turno-t { background-color: var(--turno-t); }
  .turno-n { background-color: var(--turno-n); }
  .turno-a { background-color: var(--turno-a); }
  .turno-v { background-color: var(--turno-v); }
  .turno-f { background-color: var(--festivo); }

  .summary {
    background-color: white;
    padding: 6px;
    margin-top: 5px;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    border: 2px solid red;
    max-width: 700px;
    margin: 0 auto;
  }

  .summary h3 {
    margin-top: 0;
    margin-bottom: 3px;
    font-size: 1rem;
    font-weight: 600;
  }

  .summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 2px;
  }

  .summary-item {
    padding: 2px;
    font-size: 0.7rem;
    font-weight: 500;
  }

  .annual-summary {
    background-color: white;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    display: none;
    border: 2px solid red;
    max-width: 700px;
    margin: 0 auto;
  }

  .annual-summary.visible {
    display: block;
  }
  
  .work-days-info {
    margin-top: 3px;
    padding: 4px;
    background-color: #f5f5f5;
    border-radius: 5px;
    font-size: 0.8rem;
    border: 1px solid black;
  }

  h2 {
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0.5rem 0;
  }
</style>

<div class="controls">
  <div class="month-nav">
    <button onclick="prevMonth()">Anterior</button>
    <h2 id="currentMonth">Enero 2025</h2>
    <button onclick="nextMonth()">Siguiente</button>
  </div>
  
  <div class="legend">
    <div class="legend-item">
      <div class="legend-color" style="background-color: white; border: 1px solid #ccc"></div>
      <span>Descanso</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background-color: var(--turno-m)"></div>
      <span>Ma&#xf1;ana</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background-color: var(--turno-t)"></div>
      <span>Tarde</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background-color: var(--turno-n)"></div>
      <span>Noche</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background-color: var(--turno-a)"></div>
      <span>Adelanto</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background-color: var(--turno-v)"></div>
      <span>Vacaciones</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background-color: var(--festivo)"></div>
      <span>Festivo</span>
    </div>
  </div>
</div>

<div id="calendar" class="calendar"></div>
<div id="summary" class="summary">
  <h3>Resumen del mes</h3>
  <div class="summary-grid">
    <div class="summary-item turno-m" id="count-m">Ma&#xf1;anas: 0</div>
    <div class="summary-item turno-t" id="count-t">Tardes: 0</div>
    <div class="summary-item turno-n" id="count-n">Noches: 0</div>
    <div class="summary-item turno-a" id="count-a">Adelantos: 0</div>
    <div class="summary-item turno-v" id="count-v">Vacaciones: 0</div>
    <div class="summary-item" id="count-total">Total: 0</div>
  </div>
  <div id="workDaysInfo" class="work-days-info"></div>
</div>

<div id="annual-summary" class="annual-summary">
  <h3>Resumen Anual 2025</h3>
  <div class="summary-grid">
    <div class="summary-item turno-m" id="annual-m">Ma&#xf1;anas: 0</div>
    <div class="summary-item turno-t" id="annual-t">Tardes: 0</div>
    <div class="summary-item turno-n" id="annual-n">Noches: 0</div>
    <div class="summary-item turno-a" id="annual-a">Adelantos: 0</div>
    <div class="summary-item turno-v" id="annual-v">Vacaciones: 0</div>
    <div class="summary-item" id="annual-total">Total d&#xed;as trabajados: 0</div>
  </div>
</div>

<script>const festivos2025 = ['2025-01-01', '2025-01-06', '2025-03-19', '2025-04-18', '2025-04-21', '2025-05-01', '2025-08-15', '2025-10-09', '2025-10-12', '2025-11-01', '2025-12-06', '2025-12-25'];
const diasEspeciales = ['2025-03-18', '2025-12-24', '2025-12-31'];
const diasNuevoEspeciales = ['2025-08-14', '2025-09-08'];
const diasOctubre17 = ['2025-10-17'];
let currentDate = new Date(2025, 0, 1);
const turnosText = {
  '': 'Descanso',
  'M': 'Mañana',
  'T': 'Tarde',
  'N': 'Noche',
  'A': 'Adelanto',
  'V': 'Vacaciones',
  'F': 'Festivo'
};
const diasSemana = ['Dom.', 'Lun.', 'Mar.', 'Mie.', 'Jue.', 'Vie.', 'Sab.'];
const monthlyWorkDays = {
  0: {
    days: 21,
    hours: 168
  },
  1: {
    days: 20,
    hours: 160
  },
  2: {
    days: 19,
    hours: 152
  },
  3: {
    days: 20,
    hours: 160
  },
  4: {
    days: 21,
    hours: 168
  },
  5: {
    days: 21,
    hours: 168
  },
  7: {
    days: 19,
    hours: 152
  },
  8: {
    days: 21,
    hours: 168
  },
  9: {
    days: 21,
    hours: 168
  },
  10: {
    days: 20,
    hours: 160
  },
  11: {
    days: 19,
    hours: 152
  }
};
function updateSummary() {
  const year = currentDate.getFullYear();
  const month = currentDate.getMonth();
  const counts = {
    'M': 0,
    'T': 0,
    'N': 0,
    'A': 0,
    'V': 0
  };
  for (let day = 1; day <= 31; day++) {
    const fecha = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    const turno = localStorage.getItem(fecha);
    if (turno && counts.hasOwnProperty(turno)) {
      counts[turno]++;
    }
  }
  document.getElementById('count-m').textContent = `Mañanas: ${counts['M']}`;
  document.getElementById('count-t').textContent = `Tardes: ${counts['T']}`;
  document.getElementById('count-n').textContent = `Noches: ${counts['N']}`;
  document.getElementById('count-a').textContent = `Adelantos: ${counts['A']}`;
  document.getElementById('count-v').textContent = `Vacaciones: ${counts['V']}`;
  const total = Object.values(counts).reduce((sum, count) => sum + count, 0);
  document.getElementById('count-total').textContent = `Total: ${total}`;
  const annualSummary = document.getElementById('annual-summary');
  annualSummary.classList.toggle('visible', month === 11);
  if (month === 11) {
    calculateAnnualSummary();
  }
}
function calculateAnnualSummary() {
  const counts = {
    'M': 0,
    'T': 0,
    'N': 0,
    'A': 0,
    'V': 0
  };
  for (let month = 0; month < 12; month++) {
    for (let day = 1; day <= 31; day++) {
      const fecha = `2025-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
      const turno = localStorage.getItem(fecha);
      if (turno && counts.hasOwnProperty(turno)) {
        counts[turno]++;
      }
    }
  }
  document.getElementById('annual-m').textContent = `Mañanas: ${counts['M']}`;
  document.getElementById('annual-t').textContent = `Tardes: ${counts['T']}`;
  document.getElementById('annual-n').textContent = `Noches: ${counts['N']}`;
  document.getElementById('annual-a').textContent = `Adelantos: ${counts['A']}`;
  document.getElementById('annual-v').textContent = `Vacaciones: ${counts['V']}`;
  const total = Object.values(counts).reduce((sum, count) => sum + count, 0);
  document.getElementById('annual-total').textContent = `Total días trabajados: ${total}`;
}
function renderCalendar() {
  const year = currentDate.getFullYear();
  const month = currentDate.getMonth();
  const firstDay = new Date(year, month, 1);
  const lastDay = new Date(year, month + 1, 0);
  const monthName = new Intl.DateTimeFormat('es-ES', {
    month: 'long',
    year: 'numeric'
  }).format(currentDate);
  document.getElementById('currentMonth').textContent = monthName.charAt(0).toUpperCase() + monthName.slice(1);
  const calendar = document.getElementById('calendar');
  calendar.innerHTML = '';
  diasSemana.forEach(dia => {
    const header = document.createElement('div');
    header.className = 'day-header';
    header.textContent = dia;
    calendar.appendChild(header);
  });
  for (let i = 0; i < firstDay.getDay(); i++) {
    calendar.appendChild(document.createElement('div'));
  }
  for (let day = 1; day <= lastDay.getDate(); day++) {
    const dayEl = document.createElement('div');
    dayEl.className = 'day';
    const fecha = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    if (festivos2025.includes(fecha)) {
      dayEl.classList.add('festivo');
    }
    if (diasEspeciales.includes(fecha)) {
      dayEl.classList.add('especial');
    }
    if (diasNuevoEspeciales.includes(fecha)) {
      dayEl.classList.add('nuevo-especial');
    }
    if (diasOctubre17.includes(fecha)) {
      dayEl.classList.add('october-17');
    }
    const savedTurno = localStorage.getItem(fecha) || '';
    dayEl.innerHTML = `
      <div class="day-header">${day}</div>
      <div class="day-content ${savedTurno ? 'turno-' + savedTurno.toLowerCase() : ''}">
        <select class="turno-select" onchange="asignarTurno(this, '${fecha}')" style="background-color: ${getTurnoColor(savedTurno)}">
          <option value="" ${savedTurno === '' ? 'selected' : ''}>Descanso</option>
          <option value="M" ${savedTurno === 'M' ? 'selected' : ''}>Mañana</option>
          <option value="T" ${savedTurno === 'T' ? 'selected' : ''}>Tarde</option>
          <option value="N" ${savedTurno === 'N' ? 'selected' : ''}>Noche</option>
          <option value="A" ${savedTurno === 'A' ? 'selected' : ''}>Adelanto</option>
          <option value="V" ${savedTurno === 'V' ? 'selected' : ''}>Vacaciones</option>
          <option value="F" ${savedTurno === 'F' ? 'selected' : ''}>Festivo</option>
        </select>
      </div>
    `;
    calendar.appendChild(dayEl);
  }
  const workInfo = monthlyWorkDays[month];
  const workDaysInfo = document.getElementById('workDaysInfo');
  if (workInfo) {
    workDaysInfo.textContent = `Días laborables: ${workInfo.days} días ${workInfo.hours} Horas`;
  } else {
    workDaysInfo.textContent = '';
  }
  updateSummary();
}
function getTurnoColor(turno) {
  const colors = {
    '': 'white',
    'M': 'var(--turno-m)',
    'T': 'var(--turno-t)',
    'N': 'var(--turno-n)',
    'A': 'var(--turno-a)',
    'V': 'var(--turno-v)',
    'F': 'var(--festivo)'
  };
  return colors[turno] || 'white';
}
function asignarTurno(select, fecha) {
  const turno = select.value;
  const dayContent = select.parentElement;
  dayContent.className = 'day-content';
  if (turno) {
    dayContent.classList.add(`turno-${turno.toLowerCase()}`);
  }
  select.style.backgroundColor = getTurnoColor(turno);
  localStorage.setItem(fecha, turno);
  updateSummary();
}
function prevMonth() {
  currentDate.setMonth(currentDate.getMonth() - 1);
  renderCalendar();
}
function nextMonth() {
  currentDate.setMonth(currentDate.getMonth() + 1);
  renderCalendar();
}
renderCalendar();</script>

</head>
<body>
</body>
</html>
